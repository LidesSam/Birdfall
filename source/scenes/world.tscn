[gd_scene load_steps=9 format=4 uid="uid://dvvy75jb8tc0d"]

[ext_resource type="Texture2D" uid="uid://b33delcwra5dt" path="res://assets/sprites/tileset.png" id="1_0mw4y"]
[ext_resource type="Material" uid="uid://dokqq7kuxo23v" path="res://assets/shaders/metallic-blue.tres" id="1_22jhh"]
[ext_resource type="Script" uid="uid://bd5cl7hib232v" path="res://source/scenes/world.gd" id="1_mtj5w"]
[ext_resource type="PackedScene" uid="uid://cjkdl4rpglr3s" path="res://source/elements/player.tscn" id="2_mtj5w"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_22jhh"]
texture = ExtResource("1_0mw4y")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
2:0/0 = 0
3:0/0 = 0
0:1/0 = 0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
1:1/0 = 0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
2:1/0 = 0
3:1/0 = 0
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-13.3825, -13.3825, 13.3825, -12.7452, 13.0639, 12.7452, -13.0639, 12.7452)
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
0:4/0 = 0
1:4/0 = 0
0:5/0 = 0
1:5/0 = 0

[sub_resource type="TileSet" id="TileSet_nai4x"]
tile_size = Vector2i(32, 32)
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_22jhh")

[sub_resource type="Shader" id="1"]
code = "shader_type canvas_item;
uniform vec4 light : source_color;
uniform vec4 normal : source_color;
uniform vec4 shade : source_color;
uniform vec4 outline : source_color;

uniform vec4 swapLight : source_color;
uniform vec4 swapNormal : source_color;
uniform vec4 swapShade : source_color;
uniform vec4 swapOutline : source_color;

const float precision = 0.1;


void fragment(){
	vec4 current_color = texture(TEXTURE,UV);
		if(distance(current_color,light)<=precision){
			COLOR = swapLight;
		}
		else if(distance(current_color,normal)<=precision){
			COLOR = swapNormal;
		}
		
		else if(distance(current_color,shade)<=precision){
			COLOR = swapShade;
		}
		else if(distance(current_color,outline)<=precision){
			COLOR = swapOutline;
		}
		else{
			COLOR = current_color;
		}
		
		
}

"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_mtj5w"]
resource_local_to_scene = true
shader = SubResource("1")
shader_parameter/light = Color(0.87451, 0.87451, 0.87451, 1)
shader_parameter/normal = Color(0.623529, 0.623529, 0.623529, 1)
shader_parameter/shade = Color(0.376471, 0.376471, 0.376471, 1)
shader_parameter/outline = Color(0.12549, 0.12549, 0.12549, 1)
shader_parameter/swapLight = Color(0, 0, 0, 1)
shader_parameter/swapNormal = Color(0.0392157, 0.580392, 0.807843, 1)
shader_parameter/swapShade = Color(0, 0.0980392, 0.466667, 1)
shader_parameter/swapOutline = Color(0.258824, 0.839216, 0.52549, 1)

[node name="World" type="Node2D"]
material = ExtResource("1_22jhh")
use_parent_material = true
script = ExtResource("1_mtj5w")

[node name="Hud" type="Control" parent="."]
visible = false
layout_mode = 3
anchors_preset = 0
offset_right = 216.0
offset_bottom = 64.0

[node name="Label" type="Label" parent="Hud"]
layout_mode = 0
offset_right = 568.0
offset_bottom = 64.0
text = "World"
horizontal_alignment = 1
vertical_alignment = 1

[node name="TileMap" type="TileMapLayer" parent="."]
use_parent_material = true
tile_map_data = PackedByteArray("AAD8/wMAAAABAAAAAAD9/wMAAAABAAAAAAD+/wMAAAABAAAAAAD//wMAAAABAAAAAAAAAAMAAAABAAAAAAABAAMAAAABAAAAAAACAAMAAAABAAAAAAADAAMAAAABAAAAAAD7/wMAAAABAAAAAAABAAIAAAAAAAEAAAABAAEAAAAAAAEAAAABAAAAAAABAAEAAAD9//7/AAABAAEAAAD9////AAAAAAEAAAD9/wAAAAAAAAEAAAD9/wEAAAAAAAEAAAACAAAAAAABAAAAAAADAAAAAAABAAAAAAAEAAAAAAAAAAEAAAAEAP//AAAAAAEAAAAEAP7/AAAAAAEAAAAEAP3/AAAAAAEAAAABAP3/AAAAAAEAAAABAPz/AAAAAAEAAAAEAPz/AAABAAEAAAABAPv/AAABAAEAAAA=")
tile_set = SubResource("TileSet_nai4x")

[node name="player" parent="." instance=ExtResource("2_mtj5w")]
material = SubResource("ShaderMaterial_mtj5w")
use_parent_material = true
position = Vector2(-24, 64)

[node name="Camera2D" type="Camera2D" parent="player"]
zoom = Vector2(2, 2)
